<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aadhaar QR & OTP Generator</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #eef3ff;
    padding: 20px;
}
.box {
    width: 380px;
    margin: auto;
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 10px #aaa;
}
h2 {
    text-align: center;
    color: #333;
}
input, button {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border-radius: 5px;
    border: 1px solid #ccc;
    box-sizing: border-box;
}
button {
    background-color: #0066cc;
    color: white;
    cursor: pointer;
    border: none;
}
button:hover {
    background-color: #004999;
}
#qrcode {
    display: block;
    margin: 20px auto;
}
#otpDisplay {
    text-align: center;
    font-weight: bold;
    color: green;
    margin-top: 10px;
}
</style>
</head>
<body>
<div class="box">
    <h2>Aadhaar QR & OTP Generator</h2>
    <input type="text" id="aadhaar" placeholder="Enter Aadhaar Number (12 digits)" maxlength="12">
    <button onclick="generateQR()">Generate QR & OTP</button>
    <canvas id="qrcode"></canvas>
    <div id="otpDisplay"></div>
</div>

<!-- QRCode.js library -->
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
function generateQR() {
    const aadhaarInput = document.getElementById('aadhaar').value.trim();
    const otpDisplay = document.getElementById('otpDisplay');
    const canvas = document.getElementById('qrcode');

    // Clear previous QR and OTP
    QRCode.toCanvas(canvas, '', function() {});
    otpDisplay.textContent = '';

    // Validate Aadhaar number
    if (!aadhaarInput) {
        alert("Please enter Aadhaar number");
        return;
    }
    if (!/^\d{12}$/.test(aadhaarInput)) {
        alert("Aadhaar number must be 12 digits");
        return;
    }

    // Generate OTP (6 digits)
    const otp = Math.floor(100000 + Math.random() * 900000);

    // Combine Aadhaar and OTP for QR data
    const qrData = `Aadhaar: ${aadhaarInput}\nOTP: ${otp}`;

    // Generate QR code
    QRCode.toCanvas(canvas, qrData, { width: 200 }, function(error) {
        if (error) {
            console.error("QR generation failed:", error);
            alert("Failed to generate QR code. See console for details.");
        } else {
            otpDisplay.textContent = `Generated OTP: ${otp}`;
            console.log("QR code generated successfully");
        }
    });
}
</script>
</body>
</html>
