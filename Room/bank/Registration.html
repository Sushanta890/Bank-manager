<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>SK Bank - Zero Balance Account Opening</title>

<style>
body{font-family:Arial;background:#e9f2ff;padding:20px;}
#formBox{
    width:420px;margin:auto;background:#fff;padding:20px;
    border-radius:10px;box-shadow:0 0 10px #aaa;
}
input{width:100%;padding:8px;margin:10px 0;border-radius:6px;border:1px solid #aaa;}
button{
    width:100%;padding:10px;background:#0072ff;color:#fff;
    border:none;border-radius:6px;font-size:16px;cursor:pointer;
}
#photo{
    width:120px;height:120px;margin:auto;display:block;
    border:1px solid #aaa;object-fit:cover;
}
#otpBox{display:none;}
</style>
</head>

<body>

<h2 align="center">SK BANK — Zero Balance Account Opening</h2>

<div id="formBox">

<!-- Aadhaar Input -->
<input type="text" id="aadharInput" placeholder="Enter Aadhaar Number">

<button onclick="sendOTP()">Get OTP</button>

<!-- OTP Section -->
<div id="otpBox">
    <input type="text" id="otpInput" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify OTP</button>
</div>

<hr>

<!-- Aadhaar Details -->
<img id="photo">

<p><b>Name:</b> <span id="name"></span></p>
<p><b>Mobile:</b> <span id="mobile"></span></p>
<p><b>Gender:</b> <span id="gender"></span></p>
<p><b>Date of Birth:</b> <span id="dob"></span></p>
<p><b>Address:</b> <span id="address"></span></p>

<hr>

<button onclick="openAccount()">Open Account</button>

</div>

<script>

// RANDOM GENERATOR
function randomAccount() {
    return Math.floor(100000000000000 + Math.random() * 900000000000000);
}

function randomCustomerID() {
    return Math.floor(1000000000 + Math.random() * 9000000000);
}

// OTP
let generatedOTP = "";
let userData = null;

// STEP 1 → Send OTP
function sendOTP() {
    let aad = document.getElementById("aadharInput").value.trim();
    userData = null;

    if(aad.length < 4){
        alert("Enter a valid Aadhaar number!");
        return;
    }

    // FIND AADHAAR RECORD
    for(let i=0; i<localStorage.length; i++){
        let key = localStorage.key(i);
        let data = JSON.parse(localStorage.getItem(key));

        if(data.aadhar == aad){
            userData = data;
            break;
        }
    }

    if(!userData){
        alert("No Aadhaar record found!");
        return;
    }

    // Generate OTP (6 digits)
    generatedOTP = Math.floor(100000 + Math.random() * 900000);

    alert("OTP Sent: " + generatedOTP); // Show OTP for demo

    document.getElementById("otpBox").style.display = "block";
}

// STEP 2 → Verify OTP
function verifyOTP() {
    let entered = document.getElementById("otpInput").value;

    if(entered == generatedOTP){
        alert("OTP Verified Successfully!");
        loadAadharDetails();
    } else {
        alert("Invalid OTP!");
    }
}

// STEP 3 → Load Aadhaar Details
function loadAadharDetails() {
    if(!userData){
        alert("No Aadhaar Data Found!");
        return;
    }

    document.getElementById("photo").src = userData.photo;
    document.getElementById("name").innerText = userData.fname + " " + userData.lname;
    document.getElementById("mobile").innerText = userData.mobile;
    document.getElementById("gender").innerText = userData.gender;
    document.getElementById("dob").innerText = userData.dob;

    document.getElementById("address").innerText =
        userData.village + ", " + userData.district + ", " +
        userData.state + ", " + userData.country + " - " + userData.pin;
}

// STEP 4 → Bank Account Creation
function openAccount() {
    if(!userData){
        alert("Verify OTP first!");
        return;
    }

    let accNo = randomAccount();
    let custID = randomCustomerID();

    let bankData = {
        name : userData.fname + " " + userData.lname,
        mobile : userData.mobile,
        aadhar : userData.aadhar,
        account : accNo,
        customerID : custID,
        address : userData.village + " " + userData.district,
        photo : userData.photo
    };

    localStorage.setItem("BANK_"+userData.mobile, JSON.stringify(bankData));

    alert("Account Created Successfully!\nAccount No: " + accNo + "\nCustomer ID: " + custID);
}

</script>

</body>
</html>
