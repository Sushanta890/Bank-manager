<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SK Bank â€” Cash Ledger</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #eef5ff;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
.card {
  background: white;
  padding: 25px;
  border-radius: 12px;
  width: 850px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}
h2 {
  text-align: center;
  color: #0066cc;
  margin-top: 10px;
}
#bankLogo {
  display: block;
  margin: 0 auto;
  width: 70px;
  height: 70px;
  border-radius: 50%;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
}
th, td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
th {
  background: #d7e8ff;
  color: #003366;
}
button {
  background: #0066cc;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 16px;
  margin-top: 15px;
}
button:hover {
  opacity: 0.9;
}
</style>
</head>

<body>
<div class="card">
  <img id="bankLogo" src="https://i.ibb.co/ZK3X7Ln/skbank-logo.png" alt="SK Bank Logo">
  <h2>ðŸ’¼ SK BANK â€” CASH ACCOUNT LEDGER</h2>

  <div id="userInfo">Account Holder: <b>John Doe</b><br>
    Account No: <b>1234567890</b> | Customer ID: <b>SK12345</b><br>
    Balance: <b>â‚¹10,000.00</b>
  </div>

  <table id="ledgerTable">
    <thead>
      <tr>
        <th>Date & Time</th>
        <th>Particulars</th>
        <th>Type</th>
        <th>Debit (â‚¹)</th>
        <th>Credit (â‚¹)</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>11-11-2025 12:15 PM</td><td>Cash Deposit</td><td>Deposit</td><td></td><td>â‚¹5000.00</td></tr>
      <tr><td>11-11-2025 1:00 PM</td><td>Room Rent</td><td>Payment</td><td>â‚¹2000.00</td><td></td></tr>
    </tbody>
  </table>

  <button id="downloadPDF">ðŸ“„ Download PDF</button>
</div>

<!-- âœ… jsPDF + AutoTable CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.1/jspdf.plugin.autotable.min.js"></script>

<script>
document.getElementById('downloadPDF').addEventListener('click', async () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF("p", "pt", "a4");

  // Logo conversion fix (Base64)
  const logo = await toDataURL("https://i.ibb.co/ZK3X7Ln/skbank-logo.png");

  // Blue Header
  doc.setFillColor(0, 102, 204);
  doc.rect(0, 0, 600, 80, "F");

  // Logo & Title
  doc.addImage(logo, "PNG", 40, 20, 40, 40);
  doc.setTextColor(255,255,255);
  doc.setFontSize(18);
  doc.text("ðŸ’¼ SK BANK â€” CASH ACCOUNT LEDGER", 100, 50);

  // User Info
  doc.setFontSize(12);
  doc.setTextColor(0,0,0);
  doc.text("Account Holder: John Doe", 40, 110);
  doc.text("Account No: 1234567890", 300, 110);
  doc.text("Customer ID: SK12345", 40, 130);
  doc.text("Balance: â‚¹10,000.00", 300, 130);

  // Table
  const table = document.getElementById("ledgerTable");
  const rows = [];
  table.querySelectorAll("tbody tr").forEach(tr => {
    const cells = tr.querySelectorAll("td");
    rows.push([
      cells[0].innerText, cells[1].innerText, cells[2].innerText,
      cells[3].innerText, cells[4].innerText
    ]);
  });

  doc.autoTable({
    startY: 150,
    head: [['Date & Time', 'Particulars', 'Type', 'Debit (â‚¹)', 'Credit (â‚¹)']],
    body: rows,
    styles: { halign: "center", valign: "middle", fontSize: 10 },
    headStyles: { fillColor: [0, 102, 204], textColor: 255 },
    alternateRowStyles: { fillColor: [240, 248, 255] },
  });

  const y = doc.lastAutoTable.finalY + 30;
  doc.setTextColor(0,0,128);
  doc.setFont("helvetica", "bold");
  doc.text("Generated on: " + new Date().toLocaleString(), 40, y);

  // Save file
  doc.save("SKBank_Statement.pdf");
});

// Convert logo to Base64 (for mobile fix)
function toDataURL(url) {
  return fetch(url)
    .then(res => res.blob())
    .then(blob => new Promise(resolve => {
      const reader = new FileReader();
      reader.onloadend = () => resolve(reader.result);
      reader.readAsDataURL(blob);
    }));
}
</script>
</body>
</html>
