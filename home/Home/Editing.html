<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Account Manager — SK Bank</title>
<style>
:root { --accent:#6c5ce7; --bg:#f8f9fb; }
body {
  font-family:Inter,system-ui,Segoe UI,Roboto,Arial;
  background:var(--bg);
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:30px;
}
.container {
  width:90%;
  max-width:950px;
  background:white;
  border-radius:12px;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
  padding:20px;
  animation:fadeIn .8s ease;
}
@keyframes fadeIn { from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);} }

h1 { text-align:center; margin-bottom:20px; color:#333; }

table {
  width:100%;
  border-collapse:collapse;
  margin-bottom:20px;
}
th, td {
  text-align:left;
  padding:10px;
  border-bottom:1px solid #e5e7eb;
}
th { background:#f3f4f6; }

button {
  border:0;
  border-radius:6px;
  padding:6px 10px;
  cursor:pointer;
  margin:2px;
}
.edit { background:#3b82f6; color:#fff; }
.update { background:#10b981; color:#fff; display:none; }
.delete { background:#ef4444; color:#fff; }

input[type="text"],input[type="email"],input[type="tel"],input[type="password"] {
  width:95%;
  padding:6px;
  border:1px solid #d1d5db;
  border-radius:6px;
}

.message { text-align:center; font-size:14px; margin-bottom:8px; color:#555; }
.success { background:#ecfdf5; border-left:4px solid #10b981; padding:6px; border-radius:6px; }
.error { background:#fee2e2; border-left:4px solid #ef4444; padding:6px; border-radius:6px; }
</style>
</head>
<body>

<div class="container">
  <h1>SK Bank — Account Manager</h1>
  <div id="msg" class="message"></div>
  <table id="accountTable">
    <thead>
      <tr>
        <th>Full Name</th>
        <th>Mobile</th>
        <th>Email</th>
        <th>Password</th>
        <th>Account No</th>
        <th>Customer ID</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const STORAGE_KEY = "skbank_accounts_v1";

function loadAccounts() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : [];
  } catch (e) { return []; }
}

function saveAccounts(arr) {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
}

function showMessage(txt, type="success") {
  const msg = document.getElementById("msg");
  msg.innerHTML = `<div class="${type}">${txt}</div>`;
  setTimeout(()=>msg.innerHTML="",3000);
}

function renderTable() {
  const tbody = document.querySelector("#accountTable tbody");
  tbody.innerHTML = "";
  const data = loadAccounts();
  if (!data.length) {
    tbody.innerHTML = `<tr><td colspan="7" style="text-align:center;color:#888;">No accounts found</td></tr>`;
    return;
  }
  data.forEach((a,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><input type="text" value="${a.fname} ${a.lname}" disabled></td>
      <td><input type="tel" value="${a.mobile}" disabled></td>
      <td><input type="email" value="${a.email}" disabled></td>
      <td><input type="password" value="${a.password || ''}" disabled></td>
      <td>${a.accNum}</td>
      <td>${a.custId}</td>
      <td>
        <button class="edit" onclick="editRow(${i})">Edit</button>
        <button class="update" onclick="updateRow(${i})">Update</button>
        <button class="delete" onclick="deleteRow(${i})">Delete</button>
      </td>`;
    tbody.appendChild(tr);
  });
}

function editRow(i){
  const row = document.querySelectorAll("#accountTable tbody tr")[i];
  const inputs = row.querySelectorAll("input");
  inputs.forEach(inp => inp.disabled = false);
  row.querySelector(".edit").style.display = "none";
  row.querySelector(".update").style.display = "inline-block";
}

function updateRow(i){
  const data = loadAccounts();
  const row = document.querySelectorAll("#accountTable tbody tr")[i];
  const [fullnameInp, mobileInp, emailInp, passInp] = row.querySelectorAll("input");
  const [fname, lname=""] = fullnameInp.value.trim().split(" ");
  const mobile = mobileInp.value.trim();
  const email = emailInp.value.trim();
  const password = passInp.value.trim();

  if(!/^\d{10}$/.test(mobile)) return showMessage("Invalid mobile number","error");
  if(!fname) return showMessage("Name required","error");
  if(password.length < 4) return showMessage("Password must be at least 4 characters","error");

  data[i].fname = fname;
  data[i].lname = lname;
  data[i].mobile = mobile;
  data[i].email = email;
  data[i].password = password;

  saveAccounts(data);
  showMessage("Account updated successfully!");
  renderTable();
}

function deleteRow(i){
  const data = loadAccounts();
  if(!confirm("Delete this account?")) return;
  data.splice(i,1);
  saveAccounts(data);
  showMessage("Account deleted!","error");
  renderTable();
}

renderTable();
</script>
</body>
</html>
